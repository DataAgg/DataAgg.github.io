<!DOCTYPE html><html lang="en" dir="ltr" class="2xl:text-[20px]"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="sitemap" href="/sitemap-index.xml"><link rel="shortcut icon" href="/_astro/favicon.sNBBSGPZ.ico"><link rel="icon" type="image/svg+xml" href="/_astro/favicon.jAUM_1GV.svg"><link rel="mask-icon" href="/_astro/favicon.jAUM_1GV.svg" color="#8D46E7"><link rel="apple-touch-icon" sizes="180x180" href="/_astro/apple-touch-icon.qzCMJsat.png"><style is:global>
  :root {
    --aw-font-sans: 'Inter Variable';
    --aw-font-serif: var(--aw-font-sans);
    --aw-font-heading: var(--aw-font-sans);
    --aw-color-primary: #6966ff;
    --aw-color-secondary: #3ed9a4;
    --aw-color-accent: #e45555;
    --aw-color-text-heading: rgb(0 0 0);
    --aw-color-text-default: #181818;
    --aw-color-text-muted: rgb(0x18 0x18 0x18 / 66%);
    --aw-color-bg-page: #ffffff;
    --aw-color-bg-page-dark: #ffffff;
    --aw-color-layer1: #ffffff;
    --aw-color-layer2: #e9ecee;
    --aw-color-layer3: #ffffff;
    --aw-color-layer4: #f7f8fa;
    --aw-color-layer5: #ffffff;
    --aw-color-layer6: #edf0f2;
    --aw-color-layer7: #d5dadf;
    --aw-color-layer8: #ffffff;

    ::selection {
      background-color: lavender;
    }
  }

  .dark {
    --aw-font-sans: 'Inter Variable';
    --aw-font-serif: var(--aw-font-sans);
    --aw-font-heading: var(--aw-font-sans);
    --aw-color-primary: #6966ff;
    --aw-color-secondary: #3ed9a4;
    --aw-color-accent: #e45555;
    --aw-color-text-heading: rgb(0 0 0);
    --aw-color-text-default: #fafafa;
    --aw-color-text-muted: rgb(0xfa 0xfa 0xfa / 66%);
    --aw-color-bg-page: #000000;
    --aw-color-bg-page-dark: #000000;
    --aw-color-layer1: #000000;
    --aw-color-layer2: #18181b;
    --aw-color-layer3: #0c0c0d;
    --aw-color-layer4: #212124;
    --aw-color-layer5: #303033;
    --aw-color-layer6: #3b3b3f;
    --aw-color-layer7: #494950;
    --aw-color-layer8: #56565c;

    ::selection {
      background-color: #181825;
      color: snow;
    }
  }
</style><script>(function(){const defaultTheme = "dark";

  function applyTheme(theme) {
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    const matches = document.querySelectorAll('[data-aw-toggle-color-scheme] > input');

    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.checked = theme !== 'dark';
      });
    }
  }

  if ((defaultTheme && defaultTheme.endsWith(':only')) || (!localStorage.theme && defaultTheme !== 'system')) {
    applyTheme(defaultTheme.replace(':only', ''));
  } else if (
    localStorage.theme === 'dark' ||
    (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
  ) {
    applyTheme('dark');
  } else {
    applyTheme('light');
  }
})();</script><title>Float Capital â€” TokenAgg DAO</title>
<meta name="description" content="FLOAT CAPITAL(ç™½çš®ä¹¦)" />
<meta name="robots" content="index,follow" />
<link rel="canonical" href="https://dataagg.github.io/floatcapital" />
<meta property="og:title" content="Float Capital" />
<meta property="og:description" content="FLOAT CAPITAL(ç™½çš®ä¹¦)" />
<meta property="og:url" content="https://dataagg.github.io/floatcapital" />
<meta property="og:type" content="article" />
<meta property="og:image" content="https://dataagg.github.io/imgs/blogs/floatcapital.cr.png" />

<meta property="og:locale" content="en" />
<meta property="og:site_name" content="TokenAgg DAO" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@watano" />
<meta name="twitter:creator" content="@watano" /><!-- Uncomment line below to activate View Transitions --><!-- <ViewTransitions fallback="swap" /> --><link rel="stylesheet" href="/_astro/click-through.45fq7QCF.css" /></head> <body class="antialiased text-default bg-page tracking-tight">   <header class="sticky top-0 z-40 flex-none mx-auto w-full border-b border-gray-50/0 transition-[opacity] ease-in-out" data-aw-sticky-header id="header"> <div class="absolute inset-0"></div> <div class="relative text-default py-3 px-3 md:px-6 mx-auto w-full md:flex md:justify-between max-w-7xl"> <div class="flex justify-between"> <a class="flex items-center" href="/"> <img src="/_astro/logo-long-dark.TphFalWY_Z1Yevjd.svg" id="toplogo" alt="TokenAgg DAO" width="199" height="64" loading="lazy" decoding="async"><script>(function(){const defaultTheme = "dark";

  if (document.documentElement.classList.contains('dark')) {
    document.getElementById('toplogo').src = '/imgs/logo-long-dark.svg';
  } else {
    document.getElementById('toplogo').src = '/imgs/logo-long-light.svg';
  }
})();</script> </a> <div class="flex items-center md:hidden"> <button class="flex flex-col h-12 w-12 rounded justify-center items-center cursor-pointer group" aria-label="Toggle Menu" data-aw-toggle-menu> <span class="sr-only">Toggle Menu</span>  <span aria-hidden="true" class="h-0.5 w-6 my-1 rounded-full bg-black dark:bg-white transition ease transform duration-200 opacity-80 group-[.expanded]:rotate-45 group-[.expanded]:translate-y-2.5"></span> <span aria-hidden="true" class="h-0.5 w-6 my-1 rounded-full bg-black dark:bg-white transition ease transform duration-200 opacity-80 group-[.expanded]:opacity-0"></span> <span aria-hidden="true" class="h-0.5 w-6 my-1 rounded-full bg-black dark:bg-white transition ease transform duration-200 opacity-80 group-[.expanded]:-rotate-45 group-[.expanded]:-translate-y-2.5"></span>  </button> </div> </div> <nav class="items-center w-full md:w-auto hidden md:flex text-default overflow-y-auto overflow-x-hidden md:overflow-y-visible md:overflow-x-auto md:mx-5" aria-label="Main navigation"> <ul class="flex flex-col md:flex-row md:self-center w-full md:w-auto text-xl md:text-[0.9375rem] tracking-[0.01rem] font-medium"> <li class="dropdown">  <button class="hover:text-link dark:hover:text-white px-4 py-3 flex items-center"> é¡¹ç›®  <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-3.5 h-3.5 ml-0.5 rtl:ml-0 rtl:mr-0.5 hidden md:inline" data-icon="tabler:chevron-down">  <symbol id="ai:tabler:chevron-down"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m6 9l6 6l6-6"/></symbol> <use  xlink:href="#ai:tabler:chevron-down"></use> </svg> </button> <ul class="dropdown-menu md:backdrop-blur-md dark:md:bg-dark rounded md:absolute pl-4 md:pl-0 md:hidden font-medium md:bg-white/90 md:min-w-[200px] drop-shadow-xl"> <li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/project/index.html?id=001"> TokenAgg DAO </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/project/index.html?id=012"> DApp Admin </a> </li> </ul>  </li><li class="dropdown">  <button class="hover:text-link dark:hover:text-white px-4 py-3 flex items-center"> è§£å†³æ–¹æ¡ˆ  <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-3.5 h-3.5 ml-0.5 rtl:ml-0 rtl:mr-0.5 hidden md:inline" data-icon="tabler:chevron-down">   <use  xlink:href="#ai:tabler:chevron-down"></use> </svg> </button> <ul class="dropdown-menu md:backdrop-blur-md dark:md:bg-dark rounded md:absolute pl-4 md:pl-0 md:hidden font-medium md:bg-white/90 md:min-w-[200px] drop-shadow-xl"> <li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/solution1"> ç”Ÿé²œé…é€ </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/solution2"> è¯Šæ‰€è”ç›Ÿ </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/solution3"> å¦™è›™äº‘æ±  </a> </li> </ul>  </li><li class="dropdown">  <button class="hover:text-link dark:hover:text-white px-4 py-3 flex items-center"> å…¬å¸  <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-3.5 h-3.5 ml-0.5 rtl:ml-0 rtl:mr-0.5 hidden md:inline" data-icon="tabler:chevron-down">   <use  xlink:href="#ai:tabler:chevron-down"></use> </svg> </button> <ul class="dropdown-menu md:backdrop-blur-md dark:md:bg-dark rounded md:absolute pl-4 md:pl-0 md:hidden font-medium md:bg-white/90 md:min-w-[200px] drop-shadow-xl"> <li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/teams"> å…³äºæˆ‘ä»¬ </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/intro"> å…¬å¸ä»·å€¼ </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/story"> æˆåŠŸæ¡ˆä¾‹ </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/privacy"> éšç§æ¡æ¬¾ </a> </li> </ul>  </li><li class="dropdown">  <button class="hover:text-link dark:hover:text-white px-4 py-3 flex items-center"> åšå®¢  <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-3.5 h-3.5 ml-0.5 rtl:ml-0 rtl:mr-0.5 hidden md:inline" data-icon="tabler:chevron-down">   <use  xlink:href="#ai:tabler:chevron-down"></use> </svg> </button> <ul class="dropdown-menu md:backdrop-blur-md dark:md:bg-dark rounded md:absolute pl-4 md:pl-0 md:hidden font-medium md:bg-white/90 md:min-w-[200px] drop-shadow-xl"> <li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/category/é¡¹ç›®æ¨è"> é¡¹ç›®æ¨è </a> </li><li> <a class="first:rounded-t last:rounded-b md:hover:bg-gray-100 hover:text-link dark:hover:text-white dark:hover:bg-gray-700 py-2 px-5 block whitespace-no-wrap" href="/category/åŸºç¡€çŸ¥è¯†"> åŸºç¡€çŸ¥è¯† </a> </li> </ul>  </li> </ul> </nav> <div class="hidden md:self-center flex md:flex items-center md:mb-0 fixed w-full md:w-auto md:static justify-end left-0 rtl:left-auto rtl:right-0 bottom-0 p-3 md:p-0"> <div class="items-center flex justify-between w-full md:w-auto"> <div class="flex"> <button type="button" class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Toggle between Dark and Light mode" data-aw-toggle-color-scheme><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 md:w-5 md:h-5 md:inline-block" data-icon="tabler:sun">  <symbol id="ai:tabler:sun"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7l-.7.7m0 11.4l.7.7m-12.1-.7l-.7.7"/></symbol> <use  xlink:href="#ai:tabler:sun"></use> </svg></button> <a class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="RSS Feed" href="/rss.xml"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5" data-icon="tabler:rss">  <symbol id="ai:tabler:rss"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 19a1 1 0 1 0 2 0a1 1 0 1 0-2 0M4 4a16 16 0 0 1 16 16M4 11a9 9 0 0 1 9 9"/></symbol> <use  xlink:href="#ai:tabler:rss"></use> </svg> </a> </div> <span class="ml-4 rtl:ml-0 rtl:mr-4"> <a class="btn-secondary ml-2 py-2.5 px-5.5 md:px-6 font-semibold shadow-none text-sm w-auto" target="_blank" rel="noopener noreferrer" href="https://github.com/dataagg">Github</a> </span> </div> </div> </div> </header>  <main>  <section class="py-8 sm:py-16 lg:py-20 mx-auto"> <article> <header class=""> <div class="flex justify-between flex-col sm:flex-row max-w-3xl mx-auto mt-0 mb-2 px-4 sm:px-6 sm:items-center"> <p> <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-4 h-4 inline-block -mt-0.5 dark:text-gray-400" data-icon="tabler:clock">  <symbol id="ai:tabler:clock"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0"/><path d="M12 7v5l3 3"/></g></symbol> <use  xlink:href="#ai:tabler:clock"></use> </svg> <time datetime="Tue Dec 07 2021 08:00:00 GMT+0800 (é¦™æ¸¯æ ‡å‡†æ—¶é—´)" class="inline-block">Dec 7, 2021</time>  
Â· <a class="capitalize hover:underline inline-block" href="/category/é¡¹ç›®æ¨è"> é¡¹ç›®æ¨è </a>   Â· 35 min read </p> </div> <h1 class="px-4 sm:px-6 max-w-3xl mx-auto text-4xl md:text-5xl font-bold leading-tighter tracking-tighter font-heading"> Float Capital </h1> <p class="max-w-3xl mx-auto mt-4 mb-8 px-4 sm:px-6 text-xl md:text-2xl text-muted dark:text-slate-400 text-justify"> FLOAT CAPITAL(ç™½çš®ä¹¦) </p> <img src="/imgs/blogs/floatcapital.cr.png" width="900" height="506" sizes="(max-width: 900px) 400px, 900px" style="object-fit: cover; object-position: center; max-width: 900px; max-height: 506px; aspect-ratio: 1.7786561264822134; width: 100%;" class="max-w-full lg:max-w-[900px] mx-auto mb-6 sm:rounded-md bg-gray-400 dark:bg-slate-700" alt="FLOAT CAPITAL(ç™½çš®ä¹¦)" loading="eager" decoding="async"> </header> <div class="mx-auto px-6 sm:px-6 max-w-3xl prose prose-lg lg:prose-xl dark:prose-invert dark:prose-headings:text-slate-300 prose-md prose-headings:font-heading prose-headings:leading-tighter prose-headings:tracking-tighter prose-headings:font-bold prose-a:text-primary dark:prose-a:text-blue-400 prose-img:rounded-md prose-img:shadow-lg mt-8 prose-headings:scroll-mt-[80px]"> <h1 id="float-capital-alpha-whitepaper">FLOAT CAPITAL (Alpha Whitepaper)</h1>
<p>Perpetual synthetic asset protocol æ°¸ä¹…åˆæˆèµ„äº§åè®®</p>
<ul>
<li>
<p>Jonjon Clark</p>
<p>Mphilã€‚Data Scienceï¼ŒBSc (Hons) Computer Science</p>
</li>
<li>
<p>Jason Smythe</p>
<p>BSc (Hons) Computer Science and Mathematics</p>
</li>
<li>
<p>Denham Preen</p>
<p>BSc (Hons) Computer Science</p>
</li>
<li>
<p>Paul Freund</p>
<p>BSc (Hons) Computer Scienceï¼ŒHons Philosophy</p>
</li>
<li>
<p>Guy Paterson-Jones</p>
<p>MSc Mathematics</p>
</li>
<li>
<p>WooSung Dong</p>
<p>Honsã€‚Actuarial Science</p>
</li>
<li>
<p>Michael Young</p>
<p>BEng (Hons) Computer and Electrical Engineering</p>
</li>
<li>
<p>Jono VDM</p>
<p>Honsã€‚Finance and Investmentsã€‚Passed CFA III examã€‚</p>
</li>
<li>
<p>Stent</p>
<p>Physics and Mathematics</p>
</li>
</ul>
<h2 id="æ‘˜è¦">æ‘˜è¦</h2>
<p>Float is a synthetic asset protocol providing decentralizedï¼Œtrustlessï¼Œand efficient exposure to arbitrary asset classesã€‚The Float alpha smart contracts are incentives based perpetual smart contracts that algorithmically react to market demand for long and short positions on a synthetic assetã€‚Market demand triggers dynamic adjustments of additional protocol rewards (alphaFLT and raw yield) rewarded to users taking valuable market positionsã€‚Synthetic asset exposure to the underlying asset class may dynamically fluctuate based on imbalanced market demand for various positionsã€‚</p>
<p>Float æ˜¯ä¸€ç§åˆæˆèµ„äº§åè®®ï¼Œä¸ºä»»æ„èµ„äº§ç±»åˆ«æä¾›åˆ†æ•£çš„ã€ä¸å¯ä¿¡çš„ã€é«˜æ•ˆçš„å…¬å¼€ã€‚Float alpha æ™ºèƒ½åˆçº¦æ˜¯åŸºäºæ°¸ä¹…æ™ºèƒ½åˆçº¦çš„æ¿€åŠ±æœºåˆ¶ï¼Œé€šè¿‡ç®—æ³•å¯¹å¸‚åœºå¯¹åˆæˆèµ„äº§çš„å¤šå¤´å’Œç©ºå¤´å¤´å¯¸çš„éœ€æ±‚åšå‡ºååº”ã€‚å¸‚åœºéœ€æ±‚è§¦å‘äº†é™„åŠ åè®®å¥–åŠ± (é˜¿å°”æ³• flt å’ŒåŸå§‹æ”¶ç›Š) çš„åŠ¨æ€è°ƒæ•´ï¼Œè¿™äº›å¥–åŠ±å¥–åŠ±ç»™æ‹¥æœ‰å®è´µå¸‚åœºåœ°ä½çš„ç”¨æˆ·ã€‚ç»¼åˆèµ„äº§å¯¹åŸºç¡€èµ„äº§ç±»åˆ«çš„é£é™©æ•å£å¯èƒ½ä¼šæ ¹æ®ä¸åŒå¤´å¯¸çš„ä¸å¹³è¡¡å¸‚åœºéœ€æ±‚åŠ¨æ€æ³¢åŠ¨ã€‚</p>
<p>The fundamental design of the protocol is highly scalable and abstracts all complexity from the end user allowing fast entry and exit with no minimum trade sizesã€‚Synthetic asset positions can be minted without over-collateralization and without the threat of being liquidatedã€‚</p>
<p>è¯¥åè®®çš„åŸºæœ¬è®¾è®¡å…·æœ‰é«˜åº¦å¯ä¼¸ç¼©æ€§ï¼Œå¹¶å°†æ‰€æœ‰çš„å¤æ‚æ€§ä»æœ€ç»ˆç”¨æˆ·ä¸­æŠ½è±¡å‡ºæ¥ï¼Œå…è®¸å¿«é€Ÿè¿›å‡ºï¼Œè€Œä¸éœ€è¦æœ€å°çš„äº¤æ˜“è§„æ¨¡ã€‚åˆæˆèµ„äº§å¤´å¯¸å¯ä»¥åœ¨æ²¡æœ‰è¿‡åº¦æ‹…ä¿çš„æƒ…å†µä¸‹å»ºç«‹ï¼Œä¹Ÿæ²¡æœ‰è¢«æ¸…ç®—çš„å¨èƒã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F97583">pragma</span><span style="color:#85E89D"> solidity</span><span style="color:#79B8FF"> 0.8.9</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "@float-capital/contracts/Degen.sol"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "@float-capital/contracts/Chad.sol"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#9ECBFF"> "@float-capital/contracts/Ape.sol"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">contract</span><span style="color:#B392F0"> FloatCapital</span><span style="color:#F97583"> is</span><span style="color:#B392F0"> Degen</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Chad</span><span style="color:#E1E4E8">, </span><span style="color:#B392F0">Ape</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">	// Your move ...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="1-æ¦‚è¿°">1 æ¦‚è¿°</h2>
<p>Float Capital allows users to create <strong>long or short tokenized positions referencing any arbitrary asset</strong>ã€‚</p>
<p>Float Capital å…è®¸ç”¨æˆ·åˆ›å»ºå¼•ç”¨ä»»æ„èµ„äº§çš„å¤šå¤´æˆ–ç©ºå¤´ token åŒ–å¤´å¯¸ã€‚</p>
<p>To expand furtherï¼š</p>
<ul>
<li>
<p>vanilla or leveraged</p>
</li>
<li>
<p>long or short</p>
</li>
<li>
<p>perpetual</p>
</li>
<li>
<p>tokenized exposure (ERC20)</p>
</li>
<li>
<p>to arbitrary asset classes (ETHï¼ŒBTCï¼Œgasï¼ŒNFTsï¼Œcommodities â€¦)</p>
</li>
<li>
<p>without liquidations</p>
</li>
</ul>
<p>This DeFi lego is extremely useful for many different reasons to many different usersã€‚DeFi ä¹é«˜å¯¹äºè®¸å¤šä¸åŒçš„ç”¨æˆ·ï¼Œä¸åŒçš„åŸå› éƒ½æ˜¯ç›¸å½“æœ‰ç”¨çš„ã€‚</p>
<h3 id="11-alpha-å‘å¸ƒ">1.1 Alpha å‘å¸ƒ</h3>
<p>Creating a highly complex and innovative financial protocol is difficultã€‚It presents unique engineeringï¼Œeconomic and financial challengesã€‚The core philosophy of Float is rapid and iterative development allowing us to improve and scale at the fastest possible rate while providing safetyã€‚To meet the above goal an alpha version has been deployed affording the following advantagesï¼š</p>
<ul>
<li>
<p>Early user feedbackã€‚</p>
</li>
<li>
<p>Test and validate incentive modelsã€‚</p>
</li>
<li>
<p>Quicker release cycleã€‚</p>
</li>
<li>
<p>Reduce legacyã€‚</p>
</li>
<li>
<p>Improve infrastructureã€‚</p>
</li>
</ul>
<p>The alpha version of Float Capital is deployed live on Polygon with the intention of releasing a new protocol version 4-6 months after the alpha launch based on the insights it affordsã€‚To use the live alpha (real money)ï¼Œvisit Float Capital and mint a synthetic asset in under a minuteã€‚Please note while the protocol is auditedï¼Œmany risks existã€‚</p>
<h3 id="12-ç™½çš®ä¹¦ç»“æ„">1.2 ç™½çš®ä¹¦ç»“æ„</h3>
<p>This paper will revolve around explaining the design of the <strong>alpha system as depicted in Figure 1</strong>ã€‚Sections will continually reference Figure 1 throughout the paperã€‚</p>
<h2 id="2-åˆæˆèµ„äº§">2 åˆæˆèµ„äº§</h2>
<p>Please refer to label 1 in Figure 1 for this sectionã€‚</p>
<h3 id="21-æ‘˜è¦">2.1 æ‘˜è¦</h3>
<p>A user begins by speculating on a certain asset class (long or short)ã€‚The user provides DAIï¼Œa stable coin pegged to the dollarï¼Œand in return receives a synthetic asset representing their positionã€‚This receipt is in the form of an ERC20 tokenã€‚The price of this ERC20 token is such that it tracks the underlying asset classã€‚The user is able to do 3 things with their synthetic asset tokenã€‚</p>
<p>ç”¨æˆ·ä»æŠ•æœºæŸä¸€èµ„äº§ç±»åˆ« (åšå¤šæˆ–åšç©º) å¼€å§‹ã€‚ç”¨æˆ·æä¾› DAIï¼Œè¿™æ˜¯ä¸€ç§ä¸ç¾å…ƒæŒ‚é’©çš„ç¨³å®šè´§å¸ï¼Œä½œä¸ºå›æŠ¥ï¼Œç”¨æˆ·å°†è·å¾—ä»£è¡¨å…¶ä»“ä½çš„åˆæˆèµ„äº§ã€‚è¿™ä¸ªæ”¶æ®æ˜¯ ERC20 ä»¤ç‰Œçš„å½¢å¼ã€‚è¿™ä¸ª ERC20 ä»£å¸çš„ä»·æ ¼æ˜¯è¿™æ ·çš„ï¼Œå®ƒè·Ÿè¸ªåŸºç¡€èµ„äº§ç±»åˆ«ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨åˆæˆèµ„äº§ä»¤ç‰Œåš 3 ä»¶äº‹ã€‚</p>
<ul>
<li>
<p>Sell the synth on the open marketã€‚åœ¨å¼€æ”¾å¸‚åœºä¸Šé”€å”®åˆæˆèµ„äº§</p>
<p><img src="/imgs/ohm/image-20211230223018386.png" alt="Figure 1: Float Capital Alpha System"></p>
</li>
<li>
<p>Stake the synth to earn alphaFLTã€‚è´¨æŠ¼åˆæˆèµ„äº§èµšå– alphaFLT</p>
</li>
<li>
<p>Burn the synth to redeem DAI equal to the value of the synth burnedã€‚ç‡ƒçƒ§åˆæˆèµ„äº§èµå›ä¸åˆæˆèµ„äº§ç­‰ä»·çš„ DAI</p>
</li>
</ul>
<h3 id="22-åŠ¨æœº">2.2 åŠ¨æœº</h3>
<p>Usually synthetic assets are based upon traditional financial instrumentsï¼Œallowing people to gain exposure to <code>$AMZN</code> or the <code>$SP500</code>ï¼Œfor exampleï¼Œon the blockchainã€‚Yetï¼Œthis is just one of the more common use cases of synthetic assetsã€‚Synthetic assets can be created from any quantifiable data feed allowing users to gain exposure to a far larger universe of assetsã€‚</p>
<p>In a traditional environmentï¼Œit would allow users to go long or short on sayï¼Œfor exampleï¼Œthe average amount of rainfall in Bordeauxï¼ŒFranceï¼Œthis would allow wine farmers to hedge against poor crop yields in a given season by going short while allowing guesthouses in the region to hedge against rainy weather and a lack in tourism by going longã€‚</p>
<p>In a much more practical and relevant DeFi scenarioï¼Œit gives users the power to perform powerful DeFi strategies through synthetic assets that previously have not existedã€‚For exampleï¼Œan OHM synth can allow users to hedge and earn high yields on staking while maintaining a delta neutral positionã€‚</p>
<h3 id="23-æ–¹æ³•">2.3 æ–¹æ³•</h3>
<p>All long and short synthetic assets are ERC20 tokenized positions allowing composibiliy across the DeFi ecosystemã€‚The tokens are engineered such that a minted position settles at the next price update received by the smart contractã€‚This system is known as Next Price Execution and thwarts attempts at front running to extract value from the systemã€‚Custom hooks in the ERC20 tokens allow the tokens to be minted in a single transaction step and available for immediate use upon settlement (transferï¼Œstakeï¼Œburn) without any additional user interactionã€‚This hook based lazy allocation method allows a superior user experience where the complexity of the front running prevention is entirely abstracted from the userã€‚</p>
<p>æ‰€æœ‰çš„å¤šå¤´å’Œç©ºå¤´åˆæˆèµ„äº§éƒ½æ˜¯ ERC20 é€šè¯åŒ–çš„å¤´å¯¸ï¼Œå…è®¸åœ¨ DeFi ç”Ÿæ€ç³»ç»Ÿä¸­è¿›è¡Œç»„åˆã€‚ä»£å¸è¢«è®¾è®¡æˆåœ¨æ™ºèƒ½åˆçº¦æ¥æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªä»·æ ¼æ›´æ–°æ—¶å»ºç«‹å¤´å¯¸ã€‚è¿™ä¸ªç³»ç»Ÿè¢«ç§°ä¸ºä¸‹ä¸€ä¸ªä»·æ ¼æ‰§è¡Œï¼Œå®ƒé˜»æ­¢äº†ä»ç³»ç»Ÿä¸­è·å–ä»·å€¼çš„å°è¯•ã€‚ERC20 ä»¤ç‰Œä¸­çš„è‡ªå®šä¹‰é’©å­å…è®¸ä»¤ç‰Œåœ¨å•ä¸ªäº¤æ˜“æ­¥éª¤ä¸­é“¸é€ ï¼Œå¹¶å¯åœ¨ç»“ç®— (è½¬è®©ã€æŒè‚¡ã€ç‡ƒçƒ§) æ—¶ç«‹å³ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•é¢å¤–çš„ç”¨æˆ·äº¤äº’ã€‚è¿™ç§åŸºäºé’©å­çš„å»¶è¿Ÿåˆ†é…æ–¹æ³•æä¾›äº†å“è¶Šçš„ç”¨æˆ·ä½“éªŒï¼Œåœ¨è¿™ç§ä½“éªŒä¸­ï¼Œå‰ç«¯è¿è¡Œé¢„é˜²çš„å¤æ‚æ€§å®Œå…¨ä»ç”¨æˆ·ä¸­æŠ½è±¡å‡ºæ¥ã€‚</p>
<p>All synthetic mints and redeems are batched into a single efficient order that is executed upon the next oracle price updateã€‚Coupled together with hook executionï¼Œthis allows arbitrary scaling of entry and exits into the systemï¼Œmaking the system suitable for extremely large trade volumesã€‚Oracle price updates from Chainlink occur as fast as every 27 seconds on the Polygon networkï¼Œallowing extreme speed for entry and exit to the system (sub 1 minute)ã€‚</p>
<p>æ‰€æœ‰çš„åˆæˆé“¸å¸å’Œèµå›è¢«æ‰¹é‡æˆä¸€ä¸ªæœ‰æ•ˆçš„è®¢å•ï¼Œåœ¨ä¸‹ä¸€æ¬¡ oracle ä»·æ ¼æ›´æ–°æ—¶æ‰§è¡Œã€‚å†åŠ ä¸Šé’©å­çš„æ‰§è¡Œï¼Œè¿™å…è®¸ä»»æ„æ‰©å±•è¿›å…¥å’Œé€€å‡ºç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿé€‚åˆäºéå¸¸å¤§çš„äº¤æ˜“é‡ã€‚åœ¨ Polygon ç½‘ç»œä¸Šï¼Œæ¥è‡ª Chainlink çš„ Oracle ä»·æ ¼æ›´æ–°æ¯27ç§’å‘ç”Ÿä¸€æ¬¡ï¼Œè¿™ä½¿å¾—è¿›å…¥å’Œé€€å‡ºç³»ç»Ÿçš„é€Ÿåº¦éå¸¸å¿« (ä¸åˆ°1åˆ†é’Ÿ)ã€‚</p>
<h2 id="3-æ”¶ç›Šä¸æ¿€åŠ±">3 æ”¶ç›Šä¸æ¿€åŠ±</h2>
<p>Please refer to label 2 in Figure 1 for this sectionã€‚</p>
<h3 id="31-æ‘˜è¦">3.1 æ‘˜è¦</h3>
<p>All underlying capital that is deposited by users to mint synthetic assets is deposited into a smart contract known as the yield managerã€‚The yield manager lends this underlying capital out in order to earn interestã€‚Interest earned accrues to both synthetic assets (increasing the price) and the treasuryã€‚The split is based on the balance of liquidity in the long and short positionsã€‚</p>
<p>ç”¨æˆ·ä¸ºåˆ›é€ åˆæˆèµ„äº§è€Œå­˜å…¥çš„æ‰€æœ‰åŸºç¡€èµ„æœ¬éƒ½è¢«å­˜å…¥ä¸€ä¸ªåä¸ºæ”¶ç›Šç®¡ç†å™¨çš„æ™ºèƒ½åˆçº¦ã€‚æ”¶ç›Šç®¡ç†å™¨å°†è¿™äº›èµ„æœ¬å€Ÿå‡ºä»¥èµšå–åˆ©æ¯ã€‚åˆæˆèµ„äº§ (æé«˜ä»·æ ¼) å’Œå›½å€ºçš„åˆ©æ¯æ”¶å…¥ã€‚è¿™ç§åˆ†å‰²æ˜¯åŸºäºå¤šå¤´å’Œç©ºå¤´å¤´å¯¸çš„æµåŠ¨æ€§å¹³è¡¡ã€‚</p>
<h3 id="32-æ–¹æ³•">3.2 æ–¹æ³•</h3>
<p>The yield manager is a flexible contract that can plug into any yield bearing protocolã€‚Different yield protocols have varying levels of risk and associated returnsã€‚From day 1ï¼ŒFloat Capital is using Aave in the alphaã€‚Aave is the largest blue chip yield protocol and provides desired risk adjusted returnsã€‚Float has been implemented in a modular format to allow use of other yield protocols in the futureã€‚A yield manager is deployed per marketï¼Œallowing scenarios where different synthetic markets may seek yield in differing venuesï¼Œcongruent with the synthetic markets appetite for riskã€‚The decisions above will be conducted by the community (Float Capital DAO) in the near futureã€‚</p>
<p>æ”¶ç›Šç®¡ç†å™¨æ˜¯ä¸€ä¸ªçµæ´»çš„æ™ºèƒ½åˆåŒï¼Œå¯ä»¥æ’å…¥ä»»ä½•æ”¶ç›Š bearing åè®®ã€‚ä¸åŒçš„æ”¶ç›Šåè®®æœ‰ä¸åŒç¨‹åº¦çš„é£é™©å’Œç›¸å…³çš„å›æŠ¥ã€‚ä»ç¬¬ä¸€å¤©å¼€å§‹ï¼ŒFloat Capital å°±åœ¨ alpha é˜¶æ®µä½¿ç”¨ Aaveã€‚Aave æ˜¯æœ€å¤§çš„è“ç­¹è‚¡æ”¶ç›Šç‡åè®®ï¼Œæä¾›ç†æƒ³çš„é£é™©è°ƒæ•´å›æŠ¥ã€‚Float ä»¥æ¨¡å—åŒ–æ ¼å¼å®ç°ï¼Œå…è®¸åœ¨æœªæ¥ä½¿ç”¨å…¶ä»–æ”¶ç›Šåè®®ã€‚æ¯ä¸ªå¸‚åœºéƒ½é…ç½®ä¸€ä¸ªæ”¶ç›Šç®¡ç†å™¨ï¼Œå…è®¸ä¸åŒçš„åˆæˆå¸‚åœºåœ¨ä¸åŒçš„åœºæ‰€å¯»æ±‚æ”¶ç›Šï¼Œä¸åˆæˆå¸‚åœºçš„é£é™©åå¥½ç›¸ä¸€è‡´ã€‚ä¸Šè¿°å†³å®šå°†åœ¨ä¸ä¹…çš„å°†æ¥ç”±ç¤¾åŒº (Float Capital DAO) æ‰§è¡Œã€‚</p>
<h3 id="33-æ”¶ç›Šåˆ†ç¦»">3.3 æ”¶ç›Šåˆ†ç¦»</h3>
<p>Yield is split between the Treasury and the underlying synthetic marketã€‚Yield sent to the treasury is protocol revenueã€‚Yield sent to the underlying synthetic marketï¼Œincreases the collateral backing each token and therefore increases the synthetic token priceã€‚</p>
<p>æ”¶ç›Šåœ¨å›½å€ºå’ŒåŸºç¡€çš„åˆæˆå¸‚åœºä¹‹é—´åˆ†é…ã€‚é€åˆ°è´¢æ”¿éƒ¨çš„æ”¶ç›Šæ˜¯åè®®æ”¶å…¥ã€‚å‘é€åˆ°åŸºç¡€åˆæˆå¸‚åœºçš„æ”¶ç›Šç‡ï¼Œå¢åŠ äº†æ”¯æŒæ¯ä¸ªä»£å¸çš„æŠµæŠ¼å“ï¼Œå› æ­¤å¢åŠ äº†åˆæˆä»£å¸çš„ä»·æ ¼ã€‚</p>
<p>The split of interest sent between the treasury and synthetic market is a simple linear function dependant on the balance of long and short liquidity in the marketã€‚All yield flows to the treasury if there is equal long and short liquidity (yield is not required to incentivize certain market positions)ã€‚The amount of yield flowing to the underlying market increases as the market is more imbalancedã€‚All yield allocated to the underlying synthetic market is allocated to the position (long or short) with less liquidityï¼Œas an incentive to attract more liquidity into that positionã€‚The purpose being to incentivize equal liquidity in long and short positionsã€‚</p>
<p>å›½å€ºå’Œåˆæˆå¸‚åœºä¹‹é—´çš„åˆ©æ¯åˆ†é…æ˜¯ä¸€ä¸ªç®€å•çš„çº¿æ€§å‡½æ•°ï¼Œå®ƒä¾èµ–äºå¸‚åœºä¸­é•¿æœŸå’ŒçŸ­æœŸæµåŠ¨æ€§çš„å¹³è¡¡ã€‚å¦‚æœé•¿æœŸæµåŠ¨æ€§å’ŒçŸ­æœŸæµåŠ¨æ€§ç›¸ç­‰ï¼Œæ‰€æœ‰æ”¶ç›Šéƒ½ä¼šæµå…¥å›½åº“ (ä¸ºäº†åˆºæ¿€æŸäº›å¸‚åœºå¤´å¯¸ï¼Œä¸éœ€è¦æ”¶ç›Šç‡)ã€‚æµå…¥åŸºç¡€å¸‚åœºçš„æ”¶ç›Šç‡éšç€å¸‚åœºçš„ä¸å¹³è¡¡è€Œå¢åŠ ã€‚æ‰€æœ‰åˆ†é…åˆ°åŸºç¡€åˆæˆå¸‚åœºçš„æ”¶ç›Šéƒ½è¢«åˆ†é…åˆ°æµåŠ¨æ€§è¾ƒä½çš„å¤´å¯¸ (å¤šä»“æˆ–ç©ºä»“)ï¼Œä»¥å¸å¼•æ›´å¤šçš„æµåŠ¨æ€§è¿›å…¥è¯¥å¤´å¯¸ã€‚å…¶ç›®çš„æ˜¯ä¸ºäº†æ¿€åŠ±å¤šå¤´å’Œç©ºå¤´çš„æµåŠ¨æ€§ã€‚</p>
<p>The yield generated by the whole market is more than would be generated by one side (e.g. if the users of one side put their capital into the lending platform instead of into a Float market) so if all the yield is given to the underbalanced side then an incentive is created for users to add liquidity to that side since they would be earning more yield than if they went directly to the lending platformã€‚In reality it is slightly more complicated because there is another actorï¼Œ<strong>the treasury</strong> (a smart contract)ï¼Œthat is given a portion of the yieldã€‚</p>
<p>æ•´ä¸ªå¸‚åœºæ‰€äº§ç”Ÿçš„æ”¶ç›Šä¸ä»…ä»…æ˜¯ä¸€æ–¹æ‰€äº§ç”Ÿçš„ (ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·ä¸€è¾¹æŠŠèµ„æœ¬çš„å€Ÿè´·å¹³å°è€Œä¸æ˜¯å˜æˆä¸€ä¸ªæµ®åŠ¨å¸‚åœº) å¦‚æœæ‰€æœ‰çš„æ”¶ç›Šç»™æœ¬æ–‡ä¸€è¾¹ç„¶åä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªæ¿€åŠ±æ·»åŠ æµåŠ¨æ€§é‚£è¾¹ï¼Œå› ä¸ºä»–ä»¬ä¼šæŒ£çš„æ›´å¤šæ”¶ç›Šæ¯”ç›´æ¥å»å€Ÿè´·å¹³å°è¦é«˜ã€‚åœ¨ç°å®ä¸­ï¼Œè¿™è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºè¿˜æœ‰å¦ä¸€ä¸ªå‚ä¸è€…ï¼Œå³è´¢æ”¿éƒ¨ (æ™ºèƒ½åˆçº¦)ï¼Œå®ƒè·å¾—äº†ä¸€éƒ¨åˆ†æ”¶ç›Šã€‚</p>
<p>A simple example is as followsã€‚Imagine the capital in the market was imbalancedï¼šthe short side only had $100 000 capital while the long side had $500 000ã€‚Float will invest the total capital into a lending platformï¼Œwhich we will suppose has an APY (projected interest rate per year) of 8%. If all the yield is given to the short side then the short side would receive a yield of $600 000Ã—8% per yearï¼Œwhich is an effective APY of</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚æƒ³è±¡ä¸€ä¸‹å¸‚åœºä¸­çš„èµ„æœ¬æ˜¯ä¸å¹³è¡¡çš„ï¼šåšç©ºæ–¹åªæœ‰ 10 ä¸‡ç¾å…ƒçš„èµ„æœ¬ï¼Œè€Œåšå¤šæ–¹æœ‰ 50 ä¸‡ç¾å…ƒã€‚Float å°†æŠŠå…¨éƒ¨èµ„é‡‘æŠ•å…¥ä¸€ä¸ªè´·æ¬¾å¹³å°ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªå¹³å°çš„ APY (é¢„è®¡å¹´åˆ©ç‡) ä¸º 8%ã€‚å¦‚æœæ‰€æœ‰çš„æ”¶ç›Šéƒ½ç»™äº†åšç©ºæ–¹ï¼Œé‚£ä¹ˆåšç©ºæ–¹å°†è·å¾—$600 000Ã—8% /å¹´çš„æ”¶ç›Šï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ APY</p>
<p>$$
\frac {$600000} {$100000} âˆ— 8% = 48%
$$</p>
<h2 id="4-åˆæˆèµ„äº§ä»·æ ¼è¡Œä¸º">4 åˆæˆèµ„äº§ä»·æ ¼è¡Œä¸º</h2>
<p>Please refer to label 3 in Figure 1 for this sectionã€‚</p>
<h3 id="41-æ‘˜è¦">4.1 æ‘˜è¦</h3>
<p>Every few minutesï¼Œthe smart contract will receive a new price for the underlying asset classã€‚If the price of the asset has increasedï¼Œunderlying short liquidity will transfer to underlying long liquidityã€‚If the price of the asset has decreasedï¼Œthe converse is trueã€‚The amount of value transferred between long and shorts is based on the current liquidity held in long and short positionsï¼Œwhich can vary based on market demandã€‚The variance in liquidity of long and short positionsï¼Œcan cause the synthetic asset to have floating exposure to the underlying assetã€‚This is expanded upon belowã€‚</p>
<p>æ¯éš”å‡ åˆ†é’Ÿï¼Œæ™ºèƒ½åˆçº¦å°±ä¼šæ”¶åˆ°æ ‡çš„èµ„äº§ç±»åˆ«çš„æ–°ä»·æ ¼ã€‚å¦‚æœèµ„äº§ä»·æ ¼ä¸Šæ¶¨ï¼Œæ ‡çš„çŸ­æœŸæµåŠ¨æ€§å°†è½¬ç§»åˆ°æ ‡çš„é•¿æœŸæµåŠ¨æ€§ã€‚å¦‚æœèµ„äº§çš„ä»·æ ¼ä¸‹é™äº†ï¼Œåä¹‹äº¦ç„¶ã€‚å¤šå¤´å’Œç©ºå¤´ä¹‹é—´çš„ä»·å€¼è½¬ç§»æ˜¯åŸºäºå¤šå¤´å’Œç©ºå¤´å¤´å¯¸æ‰€æŒæœ‰çš„å½“å‰æµåŠ¨æ€§ï¼Œè¿™å¯èƒ½ä¼šå› å¸‚åœºéœ€æ±‚è€Œå˜åŒ–ã€‚å¤šå¤´å’Œç©ºå¤´å¤´å¯¸çš„æµåŠ¨æ€§å·®å¼‚ï¼Œä¼šå¯¼è‡´åˆæˆèµ„äº§å¯¹æ ‡çš„èµ„äº§æœ‰æµ®åŠ¨é£é™©æ•å£ã€‚è¿™å°†åœ¨ä¸‹é¢å±•å¼€ã€‚</p>
<h3 id="42-æ•å£åŸºç¡€ä¾‹å­">4.2 æ•å£åŸºç¡€ä¾‹å­</h3>
<p>Where long liquidity = short liquidityï¼Œ($100,000 of long exposure and $100,000 of short exposure) the following is trueï¼š</p>
<p>å½“å¤šå¤´æµåŠ¨æ€§=ç©ºå¤´æµåŠ¨æ€§æ—¶ (10 ä¸‡ç¾å…ƒçš„å¤šå¤´æ•å£å’Œ 10 ä¸‡ç¾å…ƒçš„ç©ºå¤´æ•å£)ï¼Œä¸‹åˆ—æƒ…å†µæˆç«‹ï¼š</p>
<ul>
<li>in the case that the underlying asset price increases by 1%, å‡è®¾åŸºç¡€èµ„äº§ä»·æ ¼ä¸Šæ¶¨ 1%ï¼Œ</li>
<li>value to shift 1% âˆ— $100000 = $1000 ä»·å€¼è¦ç§»åŠ¨ 1% âˆ— $100000 = $1000</li>
<li>the value of the long side will now be worth $101 000ï¼Œå¤šå¤´çš„ä»·å€¼ç°åœ¨æ˜¯$101,000ï¼Œ</li>
<li>while the value of the short side will be worth $99 000ã€‚è€Œç©ºå¤´çš„ä»·å€¼æ˜¯$99,000ã€‚</li>
</ul>
<p>Note that the value locked in the system is still $200 000ã€‚Changes in the price of the asset simply shift the value between the pools of collateral backing the long and short synthetic tokensã€‚As the price increasesï¼Œvalue flows from shorts to longs and visa versaã€‚</p>
<p>è¯·æ³¨æ„ï¼Œé”å®šåœ¨ç³»ç»Ÿä¸­çš„ä»·å€¼ä»ç„¶æ˜¯ 20 ä¸‡ç¾å…ƒã€‚èµ„äº§ä»·æ ¼çš„å˜åŒ–åªæ˜¯æ”¹å˜äº†æ”¯æŒå¤šå¤´å’Œç©ºå¤´åˆæˆä»£å¸çš„æŠµæŠ¼å“æ± ä¹‹é—´çš„ä»·å€¼ã€‚éšç€ä»·æ ¼ä¸Šæ¶¨ï¼Œä»·å€¼ä»ç©ºå¤´æµå‘å¤šå¤´ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p>Now that the value on the long and short side is differentï¼Œthere will be floating exposureã€‚Exposure is always based on the notional value of the market position with less liquidityã€‚In this caseï¼Œthat is now the short side worth $99 000ã€‚This means that the long side will only have 99,000 / 101,000 = 98% exposureï¼Œwhile the short side will continue to have 99 000 / 99 000 = 100% exposureã€‚</p>
<p>æ—¢ç„¶å¤šå¤´å’Œç©ºå¤´çš„ä»·å€¼ä¸åŒï¼Œå°±ä¼šå‡ºç°æµ®åŠ¨é£é™©æ•å£ã€‚é£é™©æ•å£æ€»æ˜¯åŸºäºæµåŠ¨æ€§è¾ƒå·®çš„å¸‚åœºå¤´å¯¸çš„åä¹‰ä»·å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç©ºå¤´ç°åœ¨ä»·å€¼ 99 000 ç¾å…ƒã€‚è¿™æ„å‘³ç€åšå¤šæ–¹åªæœ‰ 99,000 / 101,000 = 98%çš„æ•å£ï¼Œè€Œåšç©ºæ–¹å°†ç»§ç»­æœ‰ 99,000 / 99,000 = 100%çš„æ•å£ã€‚</p>
<p>Given the aboveï¼Œa subsequent market movement would create the following scernario</p>
<p>é‰´äºä¸Šè¿°æƒ…å†µï¼Œéšåçš„å¸‚åœºèµ°åŠ¿å°†äº§ç”Ÿä»¥ä¸‹æƒ…æ™¯</p>
<ul>
<li>
<p>the underlying asset price again increases by 1%, åŸºç¡€èµ„äº§ä»·æ ¼å†æ¬¡ä¸Šæ¶¨ 1%ï¼Œ</p>
</li>
<li>
<p>value to shift is always based on the price movement multiplied by the notional value of the side with less liquidityã€‚Thereforeï¼Œ1% âˆ— $99000 = $900 ä»·å€¼è½¬ç§»æ€»æ˜¯åŸºäºä»·æ ¼å˜åŠ¨ä¹˜ä»¥æµåŠ¨æ€§è¾ƒå·®ä¸€æ–¹çš„åä¹‰ä»·å€¼ã€‚å› æ­¤ï¼Œ1% âˆ— $99,000 = $900</p>
</li>
<li>
<p>the value of the long side will now be worth $101,900 (101,000+ 900)ï¼Œå¤šå¤´çš„ä»·å€¼ç°åœ¨æ˜¯ 101,900 ç¾å…ƒ (101,000+ 900)</p>
</li>
<li>
<p>while the value of the short side will be worth $98,100 (99,000 âˆ’ 900)ã€‚è€Œç©ºå¤´çš„ä»·å€¼ä¸º 98,100 ç¾å…ƒ (99,000 - 900 ç¾å…ƒ)ã€‚</p>
</li>
<li>
<p>hence mathematically the long side has 98% exposure (1% âˆ— 98% âˆ— $100000 = $900) as explainedã€‚å› æ­¤ï¼Œä»æ•°å­¦ä¸Šè®²ï¼Œå¤šå¤´æœ‰ 98%çš„æ•å£ (1% âˆ— 98% âˆ— $100,000 = $900)ã€‚</p>
</li>
</ul>
<p>The reduction in exposure to the underlying asset for the overbalanced side is true for both upward and downward price movementsã€‚</p>
<p>åœ¨ä»·æ ¼ä¸Šæ¶¨å’Œä¸‹è·Œçš„æƒ…å†µä¸‹ï¼Œå¯¹æ ‡çš„èµ„äº§çš„è¿‡åº¦å¹³è¡¡æ•å£çš„å‡å°‘éƒ½æ˜¯çœŸå®çš„ã€‚</p>
<h3 id="43-mathematical-formulation-of-floating-point-exposure">4.3 Mathematical Formulation of Floating Point Exposure</h3>
<h4 id="431-definition-of-exposure">4.3.1 Definition of exposureã€‚</h4>
<p>It is common in traditional financial markets to talk about â€™having exposureâ€™ to an assetã€‚To have exposure to an asset is to be in a position where changes in properties of that asset affect oneâ€™s financial investment in that assetã€‚Exampleï¼šone can be positively exposed to the price of goldï¼Œwhich means that when the price of gold increases then the value of oneâ€™s investment will also increaseã€‚If the percentage by which the investment changesï¼Œğ‘ğ¼ï¼Œis equal to the percentage by which the value of the underlying assetâ€™s property changesï¼Œğ‘aï¼Œthen the exposure is said to be 100%. The exposure can be seen as the factor that ğ‘ğ¼ must be multiplied by in order to get ğ‘aã€‚This can be formalized as followsï¼š</p>
<p>$$
\begin {aligned} &#x26;
Ep <em>{a}=p</em> {I} \
\Rightarrow &#x26; E=p <em>{I}\left(p</em> {a}\right)^{-1}
\end {aligned}
$$</p>
<p>where ğ¸ is the exposureã€‚We can expand the percentage changes in order to get the following definition of exposureï¼š</p>
<p>$$
ğ¸ = \frac {\Delta I} {I} \frac {a} {\Delta a}
$$</p>
<p>where ğ¼ is the value of the investment and a is the value of the property of the underlying assetã€‚In this definition we assume that both values are elements of the real numbersã€‚</p>
<h4 id="432-market-rebalance-equation">4.3.2 Market rebalance equationã€‚</h4>
<p>Suppose we have a market whose long &#x26; short synthetic tokens track the value of some property of some underlying assetï¼Œaã€‚Suppose also that the total value that has been invested in the long side of the market is lï¼Œand the total value in the short side is sã€‚Consider the case where there is a change in the price of the underlying assetï¼Œğ›¿aã€‚If the change is positive then value needs to shift from the long side to the short sideï¼Œand vice versa when the change is negativeã€‚The value that is shifted between the long and short sides needs to be such that the maximum exposure for both sides is 100%. The following update equation is the one that Float uses in order to achieve thisï¼š</p>
<p>$$
\Delta l = min (lï¼Œs) \frac {\Delta a} {a}
$$</p>
<p>$$
\Delta s = âˆ’min (lï¼Œs) \frac {\Delta a} {a}
$$</p>
<p>You can see that the exposure is always less than 100% by plugging the above values into the exposure equation (1)ï¼š</p>
<p>$$
ğ¸_l = \frac {\Delta l} {l} \frac {a} {\Delta a}
$$</p>
<p>$$
ğ¸_l =\frac {min (lï¼Œs)} {l} \leq 1
$$</p>
<p>$$
ğ¸_s =\frac {\Lambda s} {s} \frac {a} {\Lambda a}
$$</p>
<p>$$
ğ¸_s =\frac {âˆ’min(lï¼Œs)} {l} \leq 1
$$</p>
<h4 id="433-differential-equations">4.3.3 Differential equationsã€‚</h4>
<p>Consider the case where m remains fixed and a variesã€‚We can talk about l &#x26; s as functions of aã€‚So (2) &#x26; (3) become</p>
<p>$$
\frac {dl} {da} =\frac {min (lï¼Œs)} {a}
$$</p>
<p>$$
\frac {ds} {da}= âˆ’ \frac {min (lï¼Œs)} {a}
$$</p>
<p>Solving these differential equations results in the following functions for l &#x26; sã€‚The initial conditions are a1,l1ï¼Œs1ã€‚</p>
<p>When l1 â‰¤ s1ï¼š</p>
<p>$$
l(a) =\begin {cases}
\frac {l_1} {a_1} aï¼šl \leq s \
âˆ’\frac {ma_1} {2a}   + mï¼šl > s \
\end {cases}
$$</p>
<p>$$
s(a) =\begin {cases}
âˆ’\frac {l_1} {a_1} a + mï¼šl \leq s \
\frac {ma_1} {2a}ï¼šl > s \
\end {cases}
$$</p>
<p>where</p>
<p>$$
a_1 =\frac {a_1m} {2l_1}
$$</p>
<p>When l1 > s1ï¼š</p>
<p>$$
l(a) =\begin {cases}
\frac {m} {2a_2} aï¼šl \leq s \
âˆ’\frac {ma_2} {2a}   + mï¼šl > s \
\end {cases}
$$</p>
<p>$$
s(a) =\begin {cases}
âˆ’\frac {m} {2a_2} a+mï¼šl \leq s \
\frac {ma_2} {2a}ï¼šl > s \
\end {cases}
$$</p>
<p>where</p>
<p>$$
a_2 =\frac {2a_1s_1} {m}
$$</p>
<p>The above equations show the value of the long and short positions as a function of the underlying asset price in the scenarios where long liquidity is greater than short liquidity and vice versaã€‚</p>
<h3 id="44-keeper">4.4 Keeper</h3>
<p>The mechanic is such that value shifting and interest accrual should take place every time a price update is made available by an oracleã€‚This means that in order for the synthetic to accurately track the underlying assetsï¼Œa keeper bot is necessary to continually perform this upkeepã€‚</p>
<p>The first keeper is simply usersã€‚All smart contract interactions call a hook that performs this update functionality to ensure an up to date system stateã€‚To further improve the accuracy of synth trackingï¼Œwe have also developed a custom keeper smart contractã€‚When called this smart contract reads whether price updates are available and if so performs upkeep actionã€‚The bot uses smart logic to automatically bump gas prices and monitor deviation thresholds of underlying assets ensuring timely upkeep is performedã€‚A redundancy bot further brute force calls the contract periodically if the main bot goes offlineã€‚</p>
<p>The system will be moved to a more decentralized chainlink keepers mechanism when this becomes available on the Polygon networkã€‚</p>
<h2 id="5-è´¨æŠ¼">5 è´¨æŠ¼</h2>
<p>Please refer to label 4 in Figure 1 for this sectionã€‚</p>
<h3 id="51-æ‘˜è¦">5.1 æ‘˜è¦</h3>
<p>Synths can be staked (locked up in a smart contract) in order to earn alphaFLT tokensã€‚The amount of alphaFLT earned is function of the dollar value of the synth stakedï¼Œthe length of time the synth is stakedï¼Œand the balance of long and short liquidity in the underlying marketã€‚Synths may be staked and unstaked at point in timeï¼Œwith users incurring a 0.5% fee when unstaking synthetic assetsã€‚</p>
<p>ä¸ºäº†è·å¾— alphaFLT ä»£å¸ï¼Œå¯ä»¥å¯¹åˆæˆèµ„äº§è¿›è¡Œè´¨æŠ¼ (é”å®šåœ¨æ™ºèƒ½åˆçº¦ä¸­)ã€‚alphaFLT èµšå–çš„é‡‘é¢æ˜¯ç”±æ‰€æŠ¼åˆæˆèµ„äº§çš„ç¾å…ƒä»·å€¼ã€æ‰€æŠ¼åˆæˆèµ„äº§çš„æ—¶é—´é•¿åº¦ä»¥åŠåŸºç¡€å¸‚åœºä¸­é•¿æœŸå’ŒçŸ­æœŸæµåŠ¨æ€§çš„ä½™é¢æ‰€å†³å®šçš„å‡½æ•°ã€‚åˆæˆèµ„äº§å¯ä»¥åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œè´¨æŠ¼å’Œè§£æŠ¼ï¼Œå½“è´¨æŠ¼åˆæˆèµ„äº§æ—¶ï¼Œç”¨æˆ·éœ€æ”¯ä»˜ 0.5%çš„è´¹ç”¨ã€‚</p>
<h3 id="52-åŸºç¡€">5.2 åŸºç¡€</h3>
<p>Equal liquidity in long and short positions is desirable as then both long and short synthetic tokens will have perfect exposure (100%) to the underlying assetã€‚Section 2 already described how yield is used in order to incentivize equal liquidity in long and short positionsã€‚</p>
<p>å¤šå¤´å’Œç©ºå¤´å¤´å¯¸çš„åŒç­‰æµåŠ¨æ€§æ˜¯å¯å–çš„ï¼Œå› ä¸ºå¤šå¤´å’Œç©ºå¤´åˆæˆä»£å¸éƒ½å°†å¯¹æ ‡çš„èµ„äº§æœ‰å®Œç¾çš„æ•å£ (100%)ã€‚ç¬¬ 2 èŠ‚å·²ç»æè¿°äº†å¦‚ä½•åˆ©ç”¨æ”¶ç›Šç‡æ¥æ¿€åŠ±å¤šå¤´å’Œç©ºå¤´ä»“ä½çš„åŒç­‰æµåŠ¨æ€§ã€‚</p>
<p>The second mechanism used for this incentivization is the rate at which alphaFLT tokens accrue to long and short liquidity stakedã€‚The basic mechanic is that liquidity staked from an underbalanced position will accrue at a much faster rate than the overbalanced positionã€‚This obvious incentive here is for users to mint and stake liquidity of the underbalanced side of the market to take advantage of the much higher rate at which alphaFLT is earnedã€‚</p>
<p>ç”¨äºè¿™ç§æ¿€åŠ±çš„ç¬¬äºŒç§æœºåˆ¶æ˜¯ alphaFLT ä»£å¸ç§¯ç´¯ä¸ºé•¿æœŸå’ŒçŸ­æœŸæµåŠ¨æ€§çš„æ¯”ç‡ã€‚å…¶åŸºæœ¬æœºåˆ¶æ˜¯ï¼Œæ¬ å¹³è¡¡å¤´å¯¸çš„æµåŠ¨æ€§ç§¯ç´¯é€Ÿåº¦è¦æ¯”è¶…å¹³è¡¡å¤´å¯¸å¿«å¾—å¤šã€‚åœ¨è¿™é‡Œï¼Œè¿™ç§æ˜æ˜¾çš„åŠ¨æœºæ˜¯ä¸ºäº†è®©ç”¨æˆ·åœ¨å¸‚åœºæ¬ å¹³è¡¡çš„ä¸€é¢é“¸é€ å’ŒæŒæœ‰æµåŠ¨æ€§ï¼Œä»¥åˆ©ç”¨ alphaFLT èµšå–çš„é«˜å¾—å¤šçš„åˆ©ç‡ã€‚</p>
<p>Every couple minutesï¼Œa new oracle price update is received and users new positions in the system are processedï¼Œleading to continued change in the liquidity balance of longs and shortsã€‚There is a significant engineering challenge in providing a dynamic and accurate rate of alphaFLT accrual for all stakers given the liquidity balance is changing so frequently in marketsã€‚Fortunatelyï¼Œwe are mathematicians with extensive solidity experienceã€‚The following sections outline mathematically how we relied on the technique of memoisation plus incentive curves to achieve this desired resultã€‚</p>
<p>æ¯éš”å‡ åˆ†é’Ÿï¼Œå°±ä¼šæ”¶åˆ°ä¸€ä¸ªæ–°çš„é¢„è¨€æœºä»·æ ¼æ›´æ–°ï¼Œå¹¶å¤„ç†ç³»ç»Ÿä¸­ç”¨æˆ·çš„æ–°å¤´å¯¸ï¼Œå¯¼è‡´å¤šå¤´å’Œç©ºå¤´çš„æµåŠ¨æ€§å¹³è¡¡æŒç»­å˜åŒ–ã€‚é‰´äºå¸‚åœºä¸­çš„æµåŠ¨æ€§å¹³è¡¡å˜åŒ–å¦‚æ­¤é¢‘ç¹ï¼Œä¸ºæ‰€æœ‰åˆ©ç›Šç›¸å…³è€…æä¾›ä¸€ä¸ªåŠ¨æ€å’Œå‡†ç¡®çš„ alphaFLT æƒè´£å‘ç”Ÿç‡æ˜¯ä¸€ä¸ªé‡å¤§çš„å·¥ç¨‹æŒ‘æˆ˜ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æ˜¯æœ‰ä¸°å¯Œç»éªŒçš„æ•°å­¦å®¶ã€‚ä»¥ä¸‹å‡ èŠ‚ä»æ•°å­¦ä¸Šæ¦‚è¿°äº†æˆ‘ä»¬å¦‚ä½•ä¾èµ–è®°å¿†æŠ€æœ¯åŠ ä¸Šæ¿€åŠ±æ›²çº¿æ¥è¾¾åˆ°è¿™ä¸ªé¢„æœŸçš„ç»“æœã€‚</p>
<p>Short explanation of the math in <code>_calculateFloatPerSecond</code> function in <code>Staker.sol</code> (link to code) worksã€‚</p>
<h3 id="53-åŸç†">5.3 åŸç†</h3>
<p>Note that the goal here is to find a way to split up the alphaFLT rewards between the long and short sides of the marketã€‚An imbalanced market is undesirable because the exposure on one side will be less than 100%. And so we want to have the alphaFLT rewards adjust in such a way that users are incentivized to rebalance imbalanced markets i.e. give more alphaFLT to the underbalanced sideã€‚</p>
<h4 id="531-key">5.3.1 Keyã€‚</h4>
<p>ğ¿ value of the Long market side</p>
<p>ğ‘† value of the Short market side</p>
<p>ğ‘€ = ğ¿ + ğ‘† total value in Market</p>
<p>ğ¸ a positive Exponent used to modify the slope of the curve</p>
<p>ğœ† percentage offset for market (adjustable variable)</p>
<p>Î› = ğœ†ğ‘€ offset scaled to market size</p>
<p>ğ‘‘ = ğ¿ âˆ’ ğ‘† signed imbalance in market</p>
<h4 id="532-equations">5.3.2 Equationsã€‚</h4>
<p>Here are the unscaled rewards (alphaFLT per second) for the long &#x26; short side as functions of ğ‘‘ï¼š</p>
<p>$$
R <em>{L} (d)=\left{\begin {array} {ll}
1 &#x26; ï¼šd+\Lambda \leq-M \
R</em> {-} (d) &#x26; ï¼š0&#x3C;d+\Lambda&#x3C;M \
1-R_ {+} (d) &#x26; :-M \leq d+\Lambda \leq 0 \
0 &#x26; ï¼šM&#x3C;d+\Lambda
\end {array}\rightã€‚
$$</p>
<p>$$
ğ‘…_ğ‘† (ğ‘‘) = 1 âˆ’ ğ‘…_ğ¿(ğ‘‘)
$$</p>
<p>where</p>
<p>$$
R_ {-} (d)=\frac {1} {2}\left(1-\frac {d+\Lambda} {M}\right)^{E}
$$</p>
<p>$$
R_ {+} (d)=\frac {1} {2}\left(1+\frac {d+\Lambda} {M}\right)^{E}
$$</p>
<p>Note that the domains of ğ‘…ğ¿ and ğ‘…ğ‘† are both <code>ğ· = {ğ‘‘ âˆˆ R : âˆ’ğ‘€ â‰¤ ğ‘‘ &#x3C; ğ‘€}</code> since <code>ğ‘‘ = ğ¿ âˆ’ ğ‘† = ğ‘€ âˆ’ 2ğ‘†</code> and ğ‘† has a range of (0ï¼Œğ‘€] (the reason 0 is not included is outside the scope of this derivation)ã€‚</p>
<p>Also note that ğ‘…ğ¿ and ğ‘…ğ‘† are percentages i.e. <code>ğ‘…ğ¿ (ğ·) âŠ† [0, 1] </code></p>
<h4 id="533-derivation">5.3.3 Derivationã€‚</h4>
<p>Requirements for the 2 curves ğ‘…ğ¿ and ğ‘…ğ‘†ï¼š</p>
<ul>
<li>(1) Both must have a value of 1 2 when ğ¿ = ğ‘† (equal issuance for a balanced market)</li>
<li>(2) Both must be continuous for all values of ğ¿ &#x26; ğ‘†</li>
<li>(3) ğ‘…ğ¿ +ğ‘…ğ‘† = 1 âˆ€ ğ¿ï¼Œğ‘† (we donâ€™t want any alphaFLT to be wasted)</li>
<li>(4) ğ‘…ğ¿ increases (with) when ğ¿ decreases and vice-versa for ğ‘…ğ‘†</li>
<li>(5) Both must have an adjustable intensityï¼›higher intensity meaning thatï¼Œaround the point where ğ¿ = ğ‘†ï¼Œğ‘…ğ¿ increases faster as ğ¿ decreasesï¼Œand vice-versa for ğ‘…ğ‘† i.e. alphaFLT rewards quickly shift toward the underbalanced side as a market becomes imbalanced</li>
<li>(6) ğ‘…ğ¿ &#x26; ğ‘…ğ‘† are both â‰¥ 0 (we canâ€™t have negative alphaFLT issuance)</li>
</ul>
<p>One way of finding curves that fit is by starting with a = ğ‘ˆ ğ‘€ where ğ‘ˆ is the value of the underbalanced side i.e.</p>
<p>$$
U =\left{\begin {array} {ll}
L &#x26; ï¼šL \leq S \
S &#x26; ï¼šS&#x3C;L \
\end {array}\rightã€‚
$$</p>
<p><strong>Consider the case where</strong> ğ‘ˆ = ğ¿</p>
<p>If we make ğ‘…ğ‘‚ âˆ a (where ğ‘‚ is the value of the overbalanced sideï¼Œin this case ğ‘‚ = ğ‘†) then #4 of our requirements is half-satisfied i.e. satisfied just for ğ¿ã€‚In factï¼Œif we make ğ‘…ğ‘‚ âˆ a ğ¸ then #4 of our requirements is still half-satisfied as long as ğ¸ âˆˆ Nï¼Œand we now have #5 half-satisfiedã€‚Let</p>
<p>$$
ğ‘…_ğ‘‚(a) = a^ğ¸
$$</p>
<p>Obviously #2 &#x26; #6 are half-satisfied for all ğ¿ â‰¤ ğ‘†ï¼Œand we can half-satisfy #1 by adjusting the equation to</p>
<p>$$
R_ {O} (a)=\frac {1} {2} (2 a)^{E}
$$</p>
<p>since</p>
<p>$$
a=\frac {1} {2} \Longleftrightarrow U=\frac {M} {2} \Longleftrightarrow L=S
$$</p>
<p>and</p>
<p>$$
1^{E}=1 \forall E \Longrightarrow \frac {1} {2} 1^{E}=\frac {1} {2}
$$</p>
<p>Finallyï¼Œif we set ğ‘…ğ‘ˆ (a) = 1 âˆ’ ğ‘…ğ‘‚ (a) then #3 is satisfied for all ğ¿ â‰¤ ğ‘†ã€‚Alsoï¼Œit follows that #1ï¼Œ #2ï¼Œ #4 &#x26; #5 are now wholly satisfied for all ğ¿ â‰¤ ğ‘†ã€‚</p>
<p><strong>Consider the case where</strong> ğ‘ˆ = ğ‘†</p>
<p>Similarlyï¼Œwe have ğ‘…ğ‘‚ &#x26; ğ‘…ğ‘ˆ that satisfy #1-6 for all ğ‘† &#x3C; ğ¿ã€‚So now all conditions are fully satisfiedã€‚</p>
<p><strong>Turn</strong> ğ‘…ğ‘‚ &#x26; ğ‘…ğ‘ˆ <strong>into</strong> ğ‘…ğ¿ &#x26; ğ‘…ğ‘†</p>
<p>Start withï¼š</p>
<p>$$
R _{O}=\left{\begin {array} {ll}
\frac {1} {2}\left (\frac {2 L} {M}\right)^{E} &#x26; ï¼šL \leq S \
\frac {1} {2}\left (\frac {2 S} {M}\right)^{E} &#x26; ï¼šL>S
\end {array}\rightã€‚
$$</p>
<p>and use definitions of ğ‘‘ &#x26; ğ‘€ to get</p>
<p>$$
2L = M+d \quad \text {and} \quad 2 S=M-d \
\Longrightarrow R_ {O} (d)
&#x26;=\left{\begin {array} {ll}
\frac {1} {2}\left (\frac {M+d} {M}\right)^{E} &#x26; ï¼šd \leq 0 \
\frac {1} {2}\left (\frac {M-d} {M}\right)^{E} &#x26; ï¼šd>0
\end {array}\right.\
&#x26;=\left{\begin {array} {ll}
R <em>{+}^{\prime} (d) \quadï¼šd \leq 0 \
R</em> {-}^{\prime} (d) \quadï¼šd>0
\end {array}\rightã€‚
$$</p>
<p>where</p>
<p>$$
R_ {-}^{\prime} (d)=\frac {1} {2}\left(1-\frac {d} {M}\right)^{E}
$$</p>
<p>$$
R_ {+}^{\prime} (d)=\frac {1} {2}\left(1+\frac {d} {M}\right)^{E}
$$</p>
<p>Alsoï¼Œ</p>
<p>$$
R <em>{U} (d)=\left{\begin {array} {ll}
1-R</em> {+}^{\prime} (d) &#x26; ï¼šd \leq 0 \
1-R _{-}^{\prime} (d) &#x26; ï¼šd>0
\end {array}\rightã€‚
$$</p>
<p>Nowï¼Œ</p>
<p>$$
\begin {aligned}
R_ {L} &#x26;=\left{\begin {array} {ll}
R <em>{U} &#x26; ï¼šL \leq S \
R</em> {O} &#x26; ï¼šL>S
\end {array}\right.\
\Longrightarrow R <em>{L} (d) &#x26;=\left{\begin {array} {ll}
1-R</em> {+} (d) &#x26; ï¼šd \leq 0 \
R _{-} (d) &#x26; ï¼šd>0
\end {array}\rightã€‚
\end {aligned}
$$</p>
<p>and</p>
<p>$$
\begin {aligned}
R_ {S} &#x26;=\left{\begin {array} {ll}
R <em>{O} \quadï¼šL \leq S \
R</em> {U} \quadï¼šL>S
\end {array}\right.\
\Longrightarrow R <em>{S} (d) &#x26;=\left{\begin {array} {ll}
R</em> {+}^{\prime} (d) &#x26; ï¼šd \leq 0 \
1-R <em>{-}^{\prime} (d) &#x26; ï¼šd>0
\end {array}\right.\
\Longrightarrow R</em> {S} (d) &#x26;=1-R_ {L} (d)
\end {aligned}
$$</p>
<p>All the conditions are satisfied for ğ‘…ğ¿ &#x26; ğ‘…ğ‘† since they are satisfied for ğ‘…ğ‘ˆ &#x26; ğ‘…ğ‘‚ï¼Œas long as âˆ’ğ‘€ â‰¤ ğ‘‘ â‰¤ ğ‘€ã€‚There are now only 2 differences between these final equations and the original ones (1) &#x26; (2)ï¼šthe variable Î› and the edge cases that it createsã€‚</p>
<p>The percentage offset ğœ† was added so that if a market tends to always be skewed in a particular direction (e.g. market is stable when long side is 10% more than short side) then we can adjust the alphaFLT rewards to increase incentive for the market to stabilize around the 50/50 (long/short) mark insteadã€‚(50/50 markets are preferred because the exposure for both sides is 1ã€‚) The percentage offset has to be scaled to the market size in order to give the desired impactï¼Œso Î› is added to the equationsã€‚Due to the offset 2 new cases were added to the piecewise function to keep condition #4 &#x26; #6 satisfiedã€‚</p>
<h3 id="54-theory-adjusted-to-solidity-code">5.4 Theory adjusted to Solidity code</h3>
<p>ğ‘…âˆ’ &#x26; ğ‘…+ are both adjusted like soï¼š</p>
<p>$$
R_ {-} (d)=\frac {1} {2}\left(1+\frac {d+\Lambda} {M}\right)^{E}=\frac {1} {2} \frac {\left[2\left(S-\frac {\Lambda} {2}\right)\right]^{E}} {M^{E}}
$$</p>
<p>$$
R_ {+} (d)=\frac {1} {2}\left(1-\frac {d+\Lambda} {M}\right)^{E}=\frac {1} {2} \frac {\left[2\left(L+\frac {\Lambda} {2}\right)\right]^{E}} {M^{E}}
$$</p>
<p>Problem - in the EVM the maximum integer size is 2 256 - so if ğ‘€ğ¸ > 2 256 we have an overflowã€‚We can prevent this issue by dividing both the numerator and the denominator in the above equations by the same amount before raising them to the power ğ¸ã€‚Note we loose precision due to integer divisionã€‚Let</p>
<p><code>a = divisorToPreventIntegerOverflowOnExponentiation</code></p>
<p>then</p>
<p>$$
R_ {-} (d)=\frac {1} {2} \frac {\left[\frac {2\left(s-\frac {\Lambda} {2}\right)} {\alpha}\right]^{E}} {\left (\frac {M} {\alpha}\right)^{E}}
$$</p>
<p>$$
R_ {+} (d)=\frac {1} {2} \frac {\left[\frac {2\left(L+\frac {\Lambda} {2}\right)} {\alpha}\right]^{E}} {\left (\frac {M} {\alpha}\right)^{E}}
$$</p>
<p>How can we optimise this for solidityï¼ŸWe can use bitshifting rather than divisionï¼Œas long as we keep a a power of 2ã€‚Bitshifting left by 5 is the same as dividing by 2 5ã€‚</p>
<h2 id="6-alphaflt-tokens">6 ALPHAFLT TOKENS</h2>
<p>Please refer to label 5 in Figure 1 for this sectionã€‚</p>
<h3 id="61-summary">6.1 Summary</h3>
<p>alphaFLT tokens accrued can be burnt in exchange for either the alpha protocol revenues or FLT tokens upon the release of the Float v1 systemã€‚The strategic move allows not only the core protocol mechanics to iterate without legacyï¼Œbut the tokenomics of the system to also improve in the coming releaseã€‚</p>
<h3 id="62-motivation">6.2 Motivation</h3>
<p>The motivation for releasing alphaFLT is the power a two token model affords rapid iterationã€‚When engineering such a revolutionary and complex protocol such as Floatï¼Œtokenomics are another massive component that warrants meticulous research to ensure long term success of the protocolã€‚Given our interest in deploying the alpha for incentive testing and user insightï¼Œthe alphaFLT is an opportunity to not be pigeon holed into a legacy tokenomic design that may not be suited for the protocolã€‚</p>
<p>alphaFLT is well thought out v0 tokenomic system that stands to greatly benefit Float early adopters though alpha treasury revenue and favourable conversion into FLT tokens upon the next system releaseã€‚</p>
<h2 id="7-other">7 OTHER</h2>
<h3 id="71-float-capital-alpha-audit">7.1 Float Capital Alpha Audit</h3>
<p>Float Capital ran a $50 000 smart contract audit competition where ethereum security experts competed to find vulnerabilities in the float alpha systemã€‚The results of the competition can be found hereã€‚</p>
<p>It is very important that you understand an audit does not equate to risk freeã€‚Many risks are present in the Float Capital alpha system and users should do their own due diligence before minting a synthetic assetã€‚This blog post describes the risks in more detailã€‚</p>
<h3 id="72-gems">7.2 GEMS</h3>
<p>Users who interact with the float capital protocol can receive 250 GEMS per dayã€‚These are currently non-transferable ERC20 tokensã€‚The tokens entitle users to special discord permissionsï¼Œspecial NFTsï¼Œand early release access to name just a fewã€‚</p>
<h3 id="73-discounts">7.3 Discounts</h3>
<p>Float Capital is pioneering cross protocol partnerships and utilityã€‚A flexible fee discount model allows users with certain NFTs to have protocol fee discountsã€‚Initial partnerships with NFT protocols Rumble Kong League ($40m total value) and Wildcards ($200k raised for animal conservation) are just the tip of the iceberg in this innovationã€‚</p>
<h3 id="74-shifting">7.4 Shifting</h3>
<p>Float Capital is first synthetic asset protocol (that we are aware of) providing the ability to natively shift synth positions (staked or not) between long and shortã€‚</p>
<p>This allows efficient building of delta neutral liquidity vaultsï¼Œkey to scaling to mass market liquidityã€‚</p>
<h3 id="75-governance">7.5 Governance</h3>
<p>Float Capital is a community governed protocol that currently relies on pseudo discord role base governanceï¼Œwhere roles are awarded to users based on GEMS collectedã€‚In the futureï¼ŒFloat Capital will move toward becoming a DAOã€‚</p>
<h3 id="76-alpha-live-performance">7.6 Alpha Live performance</h3>
<p>Since the live alpha has commencedï¼Œmore than $250 000 has been organically deposited into float to mint synthetic assetsï¼Œmaking cheap and fast synth exposure a realityã€‚The goal of the alpha will be to continue adding more synthetic assets and testing current incentive parametersã€‚These learningâ€™s will be integral for future protocol iterationsã€‚</p>
<h3 id="77-float-v1">7.7 Float v1</h3>
<p>The subsequent release following the float alpha is going be informed by the insights from the alphaã€‚The key to the design will be ensuring sustained and efficient protocol liquidityã€‚</p> </div> <div class="mx-auto px-6 sm:px-6 max-w-3xl mt-8 flex justify-between flex-col sm:flex-row"> <ul class="mr-5 rtl:mr-0 rtl:ml-5"><li class="bg-gray-100 dark:bg-slate-700 inline-block mr-2 rtl:mr-0 rtl:ml-2 mb-2 py-0.5 px-2 font-medium"><a href="/tag/EVM" class="text-muted dark:text-slate-300 hover:text-primary dark:hover:text-gray-200">EVM</a></li><li class="bg-gray-100 dark:bg-slate-700 inline-block mr-2 rtl:mr-0 rtl:ml-2 mb-2 py-0.5 px-2 font-medium"><a href="/tag/é¡¹ç›®" class="text-muted dark:text-slate-300 hover:text-primary dark:hover:text-gray-200">é¡¹ç›®</a></li></ul> <div class="mt-5 sm:mt-1 align-middle text-gray-500 dark:text-slate-600"> <span class="align-super font-bold text-gray-400 dark:text-slate-400">Share:</span> <button class="ml-2 rtl:ml-0 rtl:mr-2" title="Twitter Share" data-aw-social-share="twitter" data-aw-url="https://dataagg.github.io/floatcapital" data-aw-text="Float Capital"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 text-gray-400 dark:text-slate-500 hover:text-black dark:hover:text-slate-300" data-icon="tabler:brand-x">   <use  xlink:href="#ai:tabler:brand-x"></use> </svg> </button> <button class="ml-2 rtl:ml-0 rtl:mr-2" title="Facebook Share" data-aw-social-share="facebook" data-aw-url="https://dataagg.github.io/floatcapital"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 text-gray-400 dark:text-slate-500 hover:text-black dark:hover:text-slate-300" data-icon="tabler:brand-facebook">  <symbol id="ai:tabler:brand-facebook"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 0 1 1-1h3V3h-3a5 5 0 0 0-5 5v2z"/></symbol> <use  xlink:href="#ai:tabler:brand-facebook"></use> </svg> </button> <button class="ml-2 rtl:ml-0 rtl:mr-2" title="Linkedin Share" data-aw-social-share="linkedin" data-aw-url="https://dataagg.github.io/floatcapital" data-aw-text="Float Capital"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 text-gray-400 dark:text-slate-500 hover:text-black dark:hover:text-slate-300" data-icon="tabler:brand-linkedin">  <symbol id="ai:tabler:brand-linkedin"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm4 5v5m0-8v.01M12 16v-5"/><path d="M16 16v-3a2 2 0 0 0-4 0"/></g></symbol> <use  xlink:href="#ai:tabler:brand-linkedin"></use> </svg> </button> <button class="ml-2 rtl:ml-0 rtl:mr-2" title="Whatsapp Share" data-aw-social-share="whatsapp" data-aw-url="https://dataagg.github.io/floatcapital" data-aw-text="Float Capital"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 text-gray-400 dark:text-slate-500 hover:text-black dark:hover:text-slate-300" data-icon="tabler:brand-whatsapp">  <symbol id="ai:tabler:brand-whatsapp"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m3 21l1.65-3.8a9 9 0 1 1 3.4 2.9z"/><path d="M9 10a.5.5 0 0 0 1 0V9a.5.5 0 0 0-1 0za5 5 0 0 0 5 5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1"/></g></symbol> <use  xlink:href="#ai:tabler:brand-whatsapp"></use> </svg> </button> <button class="ml-2 rtl:ml-0 rtl:mr-2" title="Email Share" data-aw-social-share="mail" data-aw-url="https://dataagg.github.io/floatcapital" data-aw-text="Float Capital"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6 text-gray-400 dark:text-slate-500 hover:text-black dark:hover:text-slate-300" data-icon="tabler:mail">  <symbol id="ai:tabler:mail"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="m3 7l9 6l9-6"/></g></symbol> <use  xlink:href="#ai:tabler:mail"></use> </svg> </button> </div> </div> </article> </section> <div class="mx-auto px-6 sm:px-6 max-w-3xl pt-8 md:pt-4 pb-12 md:pb-20"> <a class="btn btn-tertiary px-3 md:px-3" href="/blog"><svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5 mr-1 -ml-1.5 rtl:-mr-1.5 rtl:ml-1" data-icon="tabler:chevron-left">  <symbol id="ai:tabler:chevron-left"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 6l-6 6l6 6"/></symbol> <use  xlink:href="#ai:tabler:chevron-left"></use> </svg> Back to Blog
</a> </div>  </main>  <footer class="relative border-t border-gray-200 dark:border-slate-800 not-prose"> <div class="dark:bg-dark absolute inset-0 pointer-events-none" aria-hidden="true"></div> <div class="relative max-w-7xl mx-auto px-4 sm:px-6 dark:text-slate-300"> <div class="grid grid-cols-12 gap-4 gap-y-8 sm:gap-8 py-8 md:py-12"> <div class="col-span-12 lg:col-span-4"> <div class="mb-2"> <a class="inline-block font-bold text-xl" href="/">TokenAgg DAO</a> </div> <div class="text-sm text-muted"> <a class="text-muted hover:text-gray-700 dark:text-gray-400 hover:underline transition duration-150 ease-in-out mr-2 rtl:mr-0 rtl:ml-2" href="/terms">é€šç”¨æ¡æ¬¾</a><a class="text-muted hover:text-gray-700 dark:text-gray-400 hover:underline transition duration-150 ease-in-out mr-2 rtl:mr-0 rtl:ml-2" href="/privacy">éšç§åè®®</a> </div> </div> <div class="col-span-6 md:col-span-3 lg:col-span-2"> <div class="dark:text-gray-300 font-medium mb-2">é¡¹ç›®</div> <ul class="text-sm"> <li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/project/index.html?id=001"> TokenAgg DAO </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/project/index.html?id=012"> DApp Admin </a> </li> </ul> </div><div class="col-span-6 md:col-span-3 lg:col-span-2"> <div class="dark:text-gray-300 font-medium mb-2">è§£å†³æ–¹æ¡ˆ</div> <ul class="text-sm"> <li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/solution1"> ç”Ÿé²œé…é€ </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/solution2"> è¯Šæ‰€è”ç›Ÿ </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/solution3"> å¦™è›™äº‘æ±  </a> </li> </ul> </div><div class="col-span-6 md:col-span-3 lg:col-span-2"> <div class="dark:text-gray-300 font-medium mb-2">å…¬å¸</div> <ul class="text-sm"> <li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/teams"> å…³äºæˆ‘ä»¬ </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/intro"> å…¬å¸ä»·å€¼ </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/story"> æˆåŠŸæ¡ˆä¾‹ </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/privacy"> éšç§æ¡æ¬¾ </a> </li> </ul> </div><div class="col-span-6 md:col-span-3 lg:col-span-2"> <div class="dark:text-gray-300 font-medium mb-2">åšå®¢</div> <ul class="text-sm"> <li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/category/é¡¹ç›®æ¨è"> é¡¹ç›®æ¨è </a> </li><li class="mb-2"> <a class="text-muted hover:text-gray-700 hover:underline dark:text-gray-400 transition duration-150 ease-in-out" href="/category/åŸºç¡€çŸ¥è¯†"> åŸºç¡€çŸ¥è¯† </a> </li> </ul> </div> </div> <div class="md:flex md:items-center md:justify-between py-6 md:py-8"> <ul class="flex mb-4 md:order-1 -ml-2 md:ml-4 md:mb-0 rtl:ml-0 rtl:-mr-2 rtl:md:ml-0 rtl:md:mr-4"> <li> <a class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="X" href="https://twitter.com/watano"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5" data-icon="tabler:brand-x">  <symbol id="ai:tabler:brand-x"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m4 4l11.733 16H20L8.267 4zm0 16l6.768-6.768m2.46-2.46L20 4"/></symbol> <use  xlink:href="#ai:tabler:brand-x"></use> </svg>   </a> </li><li> <a class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="RSS" href="/rss.xml"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5" data-icon="tabler:rss">   <use  xlink:href="#ai:tabler:rss"></use> </svg>   </a> </li><li> <a class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Github" href="https://github.com/dataagg"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-5 h-5" data-icon="tabler:brand-github">  <symbol id="ai:tabler:brand-github"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2c2.8-.3 5.5-1.4 5.5-6a4.6 4.6 0 0 0-1.3-3.2a4.2 4.2 0 0 0-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3 0 0 0-6.2 0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2 0 0 0-.1 3.2A4.6 4.6 0 0 0 4 9.5c0 4.6 2.7 5.7 5.5 6c-.6.6-.6 1.2-.5 2V21"/></symbol> <use  xlink:href="#ai:tabler:brand-github"></use> </svg>   </a> </li><li> <a class="text-muted dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center" aria-label="Mirror" href="https://mirror.xyz/0x94c0e8cf59e644fa76d4fa83164b9f2030d07f31">  <img src="/imgs/icon-mirror.png" class="w-5 h-5" alt="">  </a> </li> </ul> <div class="text-sm mr-4 dark:text-slate-400"> Made by <a class="text-blue-600 hover:underline dark:text-gray-200" href="https://github.com/dataagg"> DataAgg</a> Â· All rights reserved.   </div> </div> </div> </footer>   <script>(function(){const defaultTheme = "dark";

  if (window.basic_script) {
    return;
  }

  window.basic_script = true;

  function applyTheme(theme) {
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  const initTheme = function () {
    if ((defaultTheme && defaultTheme.endsWith(':only')) || (!localStorage.theme && defaultTheme !== 'system')) {
      applyTheme(defaultTheme.replace(':only', ''));
    } else if (
      localStorage.theme === 'dark' ||
      (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      applyTheme('dark');
    } else {
      applyTheme('light');
    }
  };
  initTheme();

  function attachEvent(selector, event, fn) {
    const matches = typeof selector === 'string' ? document.querySelectorAll(selector) : selector;
    if (matches && matches.length) {
      matches.forEach((elem) => {
        elem.addEventListener(event, (e) => fn(e, elem), false);
      });
    }
  }

  const onLoad = function () {
    let lastKnownScrollPosition = window.scrollY;
    let ticking = true;

    attachEvent('#header nav', 'click', function () {
      document.querySelector('[data-aw-toggle-menu]')?.classList.remove('expanded');
      document.body.classList.remove('overflow-hidden');
      document.getElementById('header')?.classList.remove('h-screen');
      document.getElementById('header')?.classList.remove('expanded');
      document.getElementById('header')?.classList.remove('bg-page');
      document.querySelector('#header nav')?.classList.add('hidden');
      document.querySelector('#header > div > div:last-child')?.classList.add('hidden');
    });

    attachEvent('[data-aw-toggle-menu]', 'click', function (_, elem) {
      elem.classList.toggle('expanded');
      document.body.classList.toggle('overflow-hidden');
      document.getElementById('header')?.classList.toggle('h-screen');
      document.getElementById('header')?.classList.toggle('expanded');
      document.getElementById('header')?.classList.toggle('bg-page');
      document.querySelector('#header nav')?.classList.toggle('hidden');
      document.querySelector('#header > div > div:last-child')?.classList.toggle('hidden');
    });

    attachEvent('[data-aw-toggle-color-scheme]', 'click', function () {
      if (defaultTheme.endsWith(':only')) {
        return;
      }
      document.documentElement.classList.toggle('dark');
      localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    });

    attachEvent('[data-aw-social-share]', 'click', function (_, elem) {
      const network = elem.getAttribute('data-aw-social-share');
      const url = encodeURIComponent(elem.getAttribute('data-aw-url'));
      const text = encodeURIComponent(elem.getAttribute('data-aw-text'));

      let href;
      switch (network) {
        case 'facebook':
          href = `https://www.facebook.com/sharer.php?u=${url}`;
          break;
        case 'twitter':
          href = `https://twitter.com/intent/tweet?url=${url}&text=${text}`;
          break;
        case 'linkedin':
          href = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${text}`;
          break;
        case 'whatsapp':
          href = `https://wa.me/?text=${text}%20${url}`;
          break;
        case 'mail':
          href = `mailto:?subject=%22${text}%22&body=${text}%20${url}`;
          break;

        default:
          return;
      }

      const newlink = document.createElement('a');
      newlink.target = '_blank';
      newlink.href = href;
      newlink.click();
    });

    function appyHeaderStylesOnScroll() {
      const header = document.querySelector('#header[data-aw-sticky-header]');
      if (lastKnownScrollPosition > 60 && !header.classList.contains('scroll')) {
        document.getElementById('header').classList.add('scroll');
      } else if (lastKnownScrollPosition <= 60 && header.classList.contains('scroll')) {
        document.getElementById('header').classList.remove('scroll');
      }
      ticking = false;
    }
    appyHeaderStylesOnScroll();

    attachEvent([document], 'scroll', function () {
      lastKnownScrollPosition = window.scrollY;

      if (!ticking) {
        window.requestAnimationFrame(() => {
          appyHeaderStylesOnScroll();
        });
        ticking = true;
      }
    });
  };
  const onPageShow = function () {
    document.documentElement.classList.add('motion-safe:scroll-smooth');
    const elem = document.querySelector('[data-aw-toggle-menu]');
    if (elem) {
      elem.classList.remove('expanded');
    }
    document.body.classList.remove('overflow-hidden');
    document.getElementById('header')?.classList.remove('h-screen');
    document.getElementById('header')?.classList.remove('expanded');
    document.querySelector('#header nav')?.classList.add('hidden');
  };

  window.onload = onLoad;
  window.onpageshow = onPageShow;

  document.addEventListener('astro:after-swap', () => {
    initTheme();
    onLoad();
    onPageShow();
  });
})();</script>  </body> </html>